# [2024_06_09_(2)]

### 공부내용 : MSA, 모놀리틱 아키텍처
## [모놀리틱 아키텍처]

모놀리틱 아키텍처는 전통적인 개발 방식으로 <span style="color:tomato">**하나의 프로젝트에 모든 기능을 함께 포함**</span>한다. 이렇게 하면 코드의 양이 커질수록 개발 및 복잡성이 증가한다.

모듈단위로 쪼개는 것이 아닌 <span style="color:skyblue">**하나의 프로젝트로 전체 애플리케이션을 묶어서 개발**</span>하기 때문에 점점 데이터베이스가 커지는 구조이다.

장점

1. 초기 개발에 유리하고 빠르게 프로토타입을 개발할 수 있다
2. 필요한 모든 기능을 한 곳에서 처리할 수 있기 때문에 복잡한 통신 없이 직접 사용이 가능하다.

단점

1. 데이터베이스가 커질수록 더 복잡해지고 유지관리 및 확징이 어려워진다.
2. 일부 기능을 수정하거나 업데이트를 하려면 전체 애플리케이션을 재배포해야한다.

해당 아키텍처는 <span style="color:tomato">간단한 소규모 프로젝트나 프로토타입을 제작할 때 적합</span>하다.

## MSA
MicroService Architecture의 줄임말이다.

<span style="color:tomato">**작고 독립적인 서비스들로 나누어 개발**</span>하고 운영하는 소프트웨어 아키텍처 스타일이다.

MSA는 대규모 시스템에서 확장성과 유지보수성을 향상시키기 위해 고안된 방법으로, 각 서비스는 특정 서비스를 수행하며 <span style="color:skyblue">**독립적으로 개발 및 배포, 확장**</span>을 할 수 있다.

기존에는 모놀리틱 아키텍처가 많이 사용되었으나 확장 및 유지보수성 문제로 모놀리틱에 대한 대안으로 나오게 되었다.

특징

1. 서비스의 독립성 : 각 서비스는 독립적으로 개발, 배포 및 확장이 가능하다.
2. 세분화 : 작고 독립적인 서비스들로 나누어 이해하기 쉽고, 변경에 용이하다.
3. 분산 시스템 : 각 서비스는 네트워크를 통해 통신하여 동기나 비동기로 이루어질 수 있다.
4. CI/CD : CI/CD파이프라인을 통해 서비스의 자동 테스트, 빌드, 배포가 이루어진다.
5. 기술의 다양성 : 하나의 서비스는 JAVA로, 다른 서비스는 Python으로 구현할 수 있다.

장점

1. 유연한 확장성
    - 특정 서비스만 확장할 수 있어 자원을 <span style="color:yellowgreen">**효율적으로 사용가능**</span>하다.
    - 필요한 서비스만 수정할 수 있다.
2. 독립적인 배포
    - 각 서비스별로 배포가 가능하다.
    - 독립적인 배포를 통해 <span style="color:yellowgreen">**개발 속도가 빨라질 수 있다**</span>.
3. 개발의 용이성
    - 코드베이스를 작게 나누어 <span style="color:yellowgreen">*쉽게 코드를 이해하고 유지보수*</span>*를 할 수 있다.
    - 특정 서비스에만 집중이 가능하다.
4. 영향
    - 특정 서비스에서 오류가 발생하여도 <span style="color:yellowgreen">**전체 시스템에 영향을 최소화**</span> 할 수 있다.
    - 오류발생 시, 해당 부분만 격리하여 다른 서비스는 정상 운영이 가능하다.

단점

1. 운영 복잡성 증가
    - 많은 수의 서비스가 독립적으로 운영되면서 모니터링, 배포등 운영 관리가 복잡해질 수 있다.
    - 이러한 복잡성으로 인해 네트워크 과부하가 일어날 수 있다.
2. 데이터 일관성 문제
    - 각 데이터가 독립적인 데이터 저장소를 갖게 되면서 데이터의 일관성을 유지하는게 어려울 수 있다.
    - 분산 트랜잭션 관리가 필요할 수 있다.
3. 통신 비용
    - 각 서비스가 분산되어 처리되기 때문에 성능 문제가 발생할 수 있다.
    - 이러한 이유들로 통신 비용이 증가할 수 있다.

MSA의 대략적인 구조는

- 다양한 클라이언트는 하나의 서버(API Gateway)로 API요청을 한다.
- 게이트웨이 서버에서 클라이언트의 요청을 적절한 서비스(서버)로 라우팅한다.
- 각 서비스(서버)들은 언어가 달라도 되고, DB도 달라도 된다.

### MSA의 구성 요소 6가지
![MSA 구조](https://github.com/GollllDong/TIL/assets/109501612/1d6e831a-26aa-4b6b-8fa5-db389666778e)

1. External Gateway - 클라이언트의 API요청의 진입점
2. Service Mesh - 서비스 간의 감지, 라우팅, 분산처리, <span style="color:tomato">**인증/인가**</span>, 보안을 담당한다.
3. Runtime Platform - <span style="color:yellowgreen">**실제 비즈니스 로직을 수행하는 영역**</span>이다.
    - 실질적인 기능들이 있는 서버들을 <span style="color:yellowgreen">**분산 트랜잭션의 패턴 중 하나인** </span><span style="color:tomato">**오케스트레이션으로 처리가 가능**</span>하다.
4. Backing Services - DB영역으로 실제 DB와 캐싱, 비동기 처리 및 메세징 처리를 수행하는 영역이다.
    - DB : MySQL, MariaDB, MongoDB등등
    - 캐싱 : Redis등등
    - MOM(Message-oriented Middleware) : 선입선출 방식의 자료구조인 Queue를 활용해서 <span style="color:yellowgreen">**대용량 데이터 처리, 비동기 데이터 처리**</span>를 하기위한 서비스
5. Telementry - 시스템 진단 기능과 모니터리 기능을 하는 영역
6. CI/CD 파이프라인 - 복잡한 구조로 인한 검사해주는 영역

## 정리
MSA아키텍처로 은행 서비스를 구현하면 <span style="color : skyblue">보다 대규모 서비스나 트랜잭션 처리가 어려울 경우에는 <span style="color : tomato">MSA아키텍처</span>를 적용하고 서비스 처리는 SAGA페턴을 적용하되 <span style="color : tomato">해당 패턴들의 장단점에 따라 맞추어 사용</span>하면 될 것 같다. 만약 쇼핑몰이나 은행같은 데이터 처리를 한꺼번에 해야 할 경우에는 <span style="color : tomato">Orchestration Pattern</span>을 적용하는 것이 좋을 것 같다.</span>
